<!DOCTYPE html>
<html>

<head>
    <!-- Page Title -->
    <meta charset="UTF-8" />
    <title id="Title">Survey Results | Robotics Scouting Site</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Page Icon -->
    <link rel="shortcut icon" href="/items/4079-transparent.png" type="image/x-icon">

    <!-- Libaries -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- External CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Yeon+Sung&display=swap">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

    <!-- External JS -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js-css/ScoutingData.js"></script>

    <!-- Internal CSS -->
    <link rel="stylesheet" href="/js-css/surveyresults.css">

</head>

<body onload="setUp(document.getElementById('searchType').value)">
    <button onclick="window.location='/'" class="btn btn-primary">Go Back</button>

    <center>

        <div id="search">
            <label for="searchInput">Find Teams</label>
            <input id="searchInput" type="text" placeholder="4079" min="1" max="99999" inputmode="numeric" type="number">

            <select id="searchType" onchange="setUp(document.getElementById('searchType').value);">
                <option value="All-Scouting">All Teams</option>
                <option value="Pit-Scouting">Pit Scouting</option>
                <option value="Match-Scouting">Match Scouting</option>
            </select>
        </div>

        <div class="container" id="Teams">

        </div>
    </center>

    <script>
        let container = document.getElementsByClassName("container")[0];
let searchInput = document.getElementById("searchInput");

searchInput.addEventListener("input", function() {
    // Clear existing boxes
    container.innerHTML = "";

    // Filter ScoutingData based on search input
    let filteredData = ScoutingData.filter(data => data[0].toString().includes(searchInput.value));

    // Sort filtered data in descending order
    filteredData.sort((a,b) => b[0] - a[0]);

    // Create new boxes based on filtered data
    for (let i = 0; i < filteredData.length; i++) {
        let box = document.createElement("div");
        box.className = "box";
        box.id = "box" + i;
        container.appendChild(box);

        let h1TeamNumber = document.createElement("h1");
        h1TeamNumber.innerHTML = "Team " + filteredData[i][0];
        box.appendChild(h1TeamNumber);

        let h2Summary = document.createElement("h2");
        let Scouting;
        if (filteredData[i].length === 13) {
            Scouting = "Pit Scouting at " + filteredData[i][11] + " at " + filteredData[i][12]
        } else if (filteredData[i].length === 15) {
            Scouting = "Match Scouting at " + filteredData[i][13] + " at " + filteredData[i][14];
        }
        h2Summary.innerHTML = Scouting;
        box.appendChild(h2Summary);

        let button = document.createElement("button");
        button.id = "button" + i;
        box.appendChild(button);

        let a = document.createElement("a");
        a.id = "a" + i;
        a.innerHTML = "View Survey Results";
        button.appendChild(a);
    }
});
    </script>
</body>

</html>